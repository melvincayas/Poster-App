<% for (let user of users) { %>
<div class="card w-75 my-4">
    <h5 class="card-header"><a href="/user/<%= user.username %>"><%= user.username %></a></h5>
    <div class="card-body">
        <div class="card-text">
            <p class="d-inline lead my-0"><strong><%= user.posts.length %></strong> <a href="/user/<%= user.username %>"><%= user.posts.length === 1 ? 'Post' : 'Posts' %></a></p>
            <p class="d-inline lead my-0"><strong><%= user.followers.length %></strong> <a href="/user/<%= user.username %>/followers"><%= user.followers.length === 1 ? 'Follower' : 'Followers' %></a></p>
            <p class="d-inline lead my-0"><strong><%= user.following.length %></strong> <a href="/user/<%= user.username %>/following">Following</a></p>
        </div>
    </div>
    <form action="/user/<%= user.username %>" method="POST">
        <div class="d-grid gap-2">
            <% if (user_id !== user._id.toString()) { %> 
                <% if (user_id && followingIds.includes(user._id)) { %> 
                    <button class="btn btn-secondary">Following</button>
                <% } else { %> 
                    <button class="btn btn-primary">Follow</button>
                <% } %> 
            <% } %> 
        </div>
    </form>
</div>
<% } %>